<script>
  $(document).ready(function(){
    $("#search-button-invalidated").click(function(){
      $('#hiddenText').val($('#search_keywords').val());
      $("#new_search").submit();
    });
    $(".filtros-button").click(function(){
      $("#myForm").slideToggle();
      $('#caret-toggle').toggleClass('fa-angle-up fa-angle-down');
    });
  });
</script>

<div class="navbar-index">
  <i class="fas fa-bars"></i>
  <%= image_tag("_logo.png", class: "navbar-image") %>
</div>

<div class="search-bar-index">

<div class="fake-form">
  <input type="text" placeholder="Search.." id="search_keywords">
  <button id="search-button-invalidated"><i class="fa fa-search"></i></button>
</div>



  <button class="filtros-button">Filtros <i id="caret-toggle" class="fas fa-angle-up"></i></button>
</div>

  <div id="myForm">
    <div class="filters-container">
      <%= simple_form_for @new_search do |s| %>
        <%= s.hidden_field :keywords, id:"hiddenText" %>
        <h4>Precio</h4>
        <div class="prices-dropdowns">
          <% if @search.nil? %>
            <%= s.input :min_price, label: false, collection: {'Min' => 0,'60,000 €' => 60000, "80,000 €" => 80000, "90,000 €" => 90000, '100,000 €' => 100000, '110,000 €' => 110000, '120,000 €' => 120000}, selected: 0 %>
            <%= s.input :max_price, label: false, collection: {'Max' => 0,'60,000 €' => 60000, "80,000 €" => 80000, "90,000 €" => 90000, '100,000 €' => 100000, '110,000 €' => 110000, '120,000 €' => 120000}, selected: 0 %>
          <% else %>
            <%= s.input :min_price, label: false, collection: {'Min' => 0,'60,000 €' => 60000, "80,000 €" => 80000, "90,000 €" => 90000, '100,000 €' => 100000, '110,000 €' => 110000, '120,000 €' => 120000}, selected: @search.min_price %>
            <%= s.input :max_price, label: false, collection: {'Max' => 0,'60,000 €' => 60000, "80,000 €" => 80000, "90,000 €" => 90000, '100,000 €' => 100000, '110,000 €' => 110000, '120,000 €' => 120000}, selected: @search.max_price %>
          <% end %>

        </div>

        <h4>Tamaño</h4>
        <div class="sizes-dropdowns">
          <% if @search.nil? %>
            <%= s.input :min_size, label: false, collection: {'Min' => 0, "40 m2" => 40, "60 m2" => 60, "80 m2" => 80, "100 m2" => 100, "120 m2" => 120, "140 m2" => 140, "160 m2" => 160}, selected: 0 %>
            <%= s.input :max_size, label: false, collection: {'Max' => 0, "40 m2" => 40, "60 m2" => 60, "80 m2" => 80, "100 m2" => 100, "120 m2" => 120, "140 m2" => 140, "160 m2" => 160}, selected: 0 %>
          <% else %>
            <%= s.input :min_size, label: false, collection: {'Min' => 0, "40 m2" => 40, "60 m2" => 60, "80 m2" => 80, "100 m2" => 100, "120 m2" => 120, "140 m2" => 140, "160 m2" => 160}, selected: @search.min_size %>
            <%= s.input :max_size, label: false, collection: {'Max' => 0, "40 m2" => 40, "60 m2" => 60, "80 m2" => 80, "100 m2" => 100, "120 m2" => 120, "140 m2" => 140, "160 m2" => 160}, selected: @search.max_size %>
          <% end %>
        </div>

        <h4>Habitaciones</h4>
        <div class="bedroom-filters">
          <% if @search.nil? %>
            <%= s.input :num_rooms,label: "", html: {class: "align-dropdowns"}, label: false, collection: {'Todos' => 0, "1+" => 1, "2+" => 2, "3+" => 3, "4+" => 4}, selected: 0 %>
          <% else %>
            <%= s.input :num_rooms, label: "", html: {class: "align-dropdowns"},label: false, collection: {'Todos' => 0, "1+" => 1, "2+" => 2, "3+" => 3, "4+" => 4}, selected: @search.num_rooms %>
          <% end %>
        </div>
          <%= s.button :submit, "Ver inmuebles", class: 'btn-ver-inmuebles' %>
      <% end %>
</div>
  </div>

  <div class="apartments-container">
    <% @apartments.each do |apartment| %>
      <%= render "apartment-card", apartment: apartment %>
    <% end %>
  </div>

